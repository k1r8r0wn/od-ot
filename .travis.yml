language: ruby

rvm:
  - 2.4.1


before_script:
  - cp config/database.travis.yml config/database.yml
  - bundle exec rake db:create RAILS_ENV=test
  - bundle exec rake db:migrate RAILS_ENV=test

script:
  - bundle exec rspec spec
  - bundle exec rubocop
  - bundle exec rails_best_practices .
  - bundle exec bundle-audit update && bundle exec bundle-audit check
  - bundle exec brakeman

cache: bundler

addons:
  code_climate:
    repo_token: c79183d506a63da6a1d6f5a85e7c64717883b03e696947c64fdfde08001815fd
